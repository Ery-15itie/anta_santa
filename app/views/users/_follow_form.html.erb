<%#  - フォローボタンのパーシャル %>
<%# 郵便局風デザイン (Address Book Style) %>

<%# ログインしており、かつ自分自身でない場合のみ表示 %>
<% if current_user && current_user != user %>
  
  <div class="inline-block">
    <% if current_user.following?(user) %>
      
      <%# --- フォロー解除ボタン (Following) --- %>
      <%# デザイン: 落ち着いたベージュ、スタンプ済みのような雰囲気 %>
      <%= button_to relationship_path(user.id), 
          method: :delete, 
          # 【重要】Turboを無効化して確実に動作させる
          form: { data: { turbo: false } },
          class: "flex items-center gap-1 px-4 py-2 bg-[#d7ccc8] text-[#5d4037] text-sm font-bold rounded shadow hover:bg-[#bcaaa4] transition border border-[#a1887f] w-full justify-center" do %>
        <span>✔ フォロー解除</span>
      <% end %>

    <% else %>
      
      <%# --- フォローボタン (Follow) --- %>
      <%# デザイン: 濃い茶色、新しい切手を貼るような雰囲気 %>
      <%= button_to relationships_path(followed_id: user.id), 
          method: :post, 
          # 【重要】Turboを無効化して確実に動作させる
          form: { data: { turbo: false } },
          class: "flex items-center gap-1 px-4 py-2 bg-[#5d4037] text-[#ffecb3] text-sm font-bold rounded shadow hover:bg-[#3e2723] transition border border-[#3e2723] w-full justify-center" do %>
        <span>＋ フォロー</span>
      <% end %>

    <% end %>
  </div>

<% end %>