<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">

      <%# プロフィールカード %>
      <div class="card shadow-lg p-4 mb-4 border-0">
        <div class="card-body text-center">
          <div class="mb-3">
            <i class="fas fa-user-circle fa-5x text-primary"></i>
          </div>
          <h2 class="card-title fw-bold mb-1"><%= @user.username %></h2>
          
          <%# フォロー/フォロワー数表示 %>
          <div class="text-secondary small mb-4">
            <span class="me-3">フォロー: <%= @user.following.count %></span>
            <span>フォロワー: <%= @user.followers.count %></span>
          </div>

          <%# アクションボタン %>
          <% if user_signed_in? && current_user != @user %>
            
            <%# 評価を送るボタン %>
            <%= link_to new_evaluation_path(receiver_id: @user.id), class: "btn btn-primary me-3 fw-bold rounded-pill shadow-sm" do %>
              <i class="fas fa-envelope me-1"></i> お手紙を送る
            <% end %>
            
            <%# フォローボタン (Turbo Streamで置き換えるターゲット) %>
            <span id="follow_button_<%= @user.id %>">
              <%= render 'relationships/follow_button', user: @user %>
            </span>

          <% elsif current_user == @user %>
            <%# 自分のプロフィールの場合は自分の評価BOXへのリンクを表示 %>
            <%= link_to evaluations_path, class: "btn btn-success me-3 fw-bold rounded-pill shadow-sm" do %>
              <i class="fas fa-gifts me-1"></i> お手紙BOXを見る
            <% end %>
          <% end %>
          
        </div>
      </div>
      
      <%# 戻るボタン %>
      <div class="text-center mt-4">
        <%= link_to users_path, class: "btn btn-outline-secondary btn-sm rounded-pill" do %>
          <i class="fas fa-arrow-left me-1"></i> ユーザー一覧に戻る
        <% end %>
      </div>

    </div>
  </div>
</div>